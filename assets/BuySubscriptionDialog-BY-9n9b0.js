import{d as q,u as Q,c as E,r as D,b as i,o as S,e as W,w as r,g as n,h as c,y as m,l as x,q as z}from"./index-1KVUsXiX.js";var j="https://js.stripe.com/v3",A=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,C="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",G=function(){for(var t=document.querySelectorAll('script[src^="'.concat(j,'"]')),a=0;a<t.length;a++){var e=t[a];if(A.test(e.src))return e}return null},J=function(t){var a=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",e=document.createElement("script");e.src="".concat(j).concat(a);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(e),e},N=function(t,a){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:a})},g=null,X=function(t){return g!==null||(g=new Promise(function(a,e){if(typeof window>"u"||typeof document>"u"){a(null);return}if(window.Stripe&&t&&console.warn(C),window.Stripe){a(window.Stripe);return}try{var o=G();o&&t?console.warn(C):o||(o=J(t)),o.addEventListener("load",function(){window.Stripe?a(window.Stripe):e(new Error("Stripe.js not available"))}),o.addEventListener("error",function(){e(new Error("Failed to load Stripe.js"))})}catch(u){e(u);return}})),g},F=function(t,a,e){if(t===null)return null;var o=t.apply(void 0,a);return N(o,e),o},B=Promise.resolve().then(function(){return X(null)}),O=!1;B.catch(function(s){O||console.warn(s)});var K=function(){for(var t=arguments.length,a=new Array(t),e=0;e<t;e++)a[e]=arguments[e];O=!0;var o=Date.now();return B.then(function(u){return F(u,a,o)})};const $={key:0},M={key:1},P="http://localhost:5173/payment-successful",L="http://localhost:5173/subscriptions",H=q({__name:"BuySubscriptionDialog",setup(s){const t=Q(),a=E(()=>t.buyDialog),e=E(()=>t.buyDialogData);function o(){t.closeBuyDialog()}const u="pk_test_51OvhUr09gQOP4k1JStphCZd6KNrudaOfpd3MQWhZrDfCudIDpXCV8OxXSpKSpd8mPJhTEgsE6A3ypiuLeO0jQh3800Iv6emHJY",f=D(!1);let h;K(u).then(p=>{h=p});const b=D([{price:"price_1OyamG09gQOP4k1JDE1Q6E5b",quantity:1}]);async function U(){if(!h){console.error("Stripe has not been initialized");return}f.value=!0;const{error:p}=await h.redirectToCheckout({lineItems:b.value,mode:"payment",successUrl:P,cancelUrl:L});p&&console.error(p),f.value=!1}return(p,d)=>{const l=i("v-col"),w=i("v-btn"),v=i("v-row"),V=i("v-card-title"),y=i("v-card-text"),I=i("stripe-checkout"),R=i("v-card-actions"),k=i("v-card"),T=i("v-dialog");return S(),W(T,{modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=_=>a.value=_),persistent:"","max-width":"850 ",style:{"background-color":"rgba(100, 100, 100, 0.9)"}},{default:r(()=>[n(k,{image:e.value.image},{default:r(()=>[n(V,{style:{"background-color":"rgba(250, 250, 250, 0.8)"}},{default:r(()=>[n(v,null,{default:r(()=>[n(l,{cols:"1"}),n(l,{cols:"10",class:"headline text-h4",align:"center"},{default:r(()=>[c(" Purchase details ")]),_:1}),n(l,{cols:"1",align:"end"},{default:r(()=>[n(w,{icon:"mdi-close",variant:"plain",onClick:d[0]||(d[0]=_=>o())})]),_:1})]),_:1})]),_:1}),n(y,{style:{"background-color":"rgba(250, 250, 250, 0.8)"}},{default:r(()=>[n(k,{elevation:"0",style:{"background-color":"rgba(250, 250, 250, 0)"}},{default:r(()=>[n(y,null,{default:r(()=>[n(v,null,{default:r(()=>[n(l,{cols:"auto",class:"font-weight-black"},{default:r(()=>[c(" Choosen subscription ")]),_:1}),n(l,{align:"start"},{default:r(()=>[c(m(e.value.name),1)]),_:1})]),_:1}),n(v,null,{default:r(()=>[n(l,{cols:"auto",class:"font-weight-black"},{default:r(()=>[c(" Subscription period ")]),_:1}),n(l,{align:"start"},{default:r(()=>[e.value.period==1?(S(),x("span",$,"1 month")):(S(),x("span",M,m(e.value.period)+" months ",1))]),_:1})]),_:1}),n(v,null,{default:r(()=>[n(l,{cols:"auto",class:"font-weight-black"},{default:r(()=>[c(" Price ")]),_:1}),n(l,{align:"start"},{default:r(()=>[c(m(e.value.price)+" zł ",1)]),_:1})]),_:1})]),_:1}),n(I,{ref:"checkoutRef",mode:"payment",pk:z(u),"line-items":b.value,"success-url":P,"cancel-url":L,onLoading:d[1]||(d[1]=_=>f.value=_)},null,8,["pk","line-items"]),n(R,null,{default:r(()=>[n(w,{color:"success",block:"",size:"large",onClick:U,variant:"elevated",loading:f.value},{default:r(()=>[c("Buy ("+m(e.value.price)+" zł)",1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["image"])]),_:1},8,["modelValue"])}}});export{H as default};
