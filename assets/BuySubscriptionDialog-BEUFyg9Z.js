import{d as q,u as z,c as y,r as x,b as s,o as g,e as A,w as l,h as o,i as k,f as a,z as _,m as E,t as G}from"./index-okE_wT6E.js";var B="https://js.stripe.com/v3",J=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,D="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",X=function(){for(var t=document.querySelectorAll('script[src^="'.concat(B,'"]')),n=0;n<t.length;n++){var e=t[n];if(J.test(e.src))return e}return null},F=function(t){var n=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",e=document.createElement("script");e.src="".concat(B).concat(n);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(e),e},K=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:n})},m=null,$=function(t){return m!==null||(m=new Promise(function(n,e){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe&&t&&console.warn(D),window.Stripe){n(window.Stripe);return}try{var r=X();r&&t?console.warn(D):r||(r=F(t)),r.addEventListener("load",function(){window.Stripe?n(window.Stripe):e(new Error("Stripe.js not available"))}),r.addEventListener("error",function(){e(new Error("Failed to load Stripe.js"))})}catch(c){e(c);return}})),m},M=function(t,n,e){if(t===null)return null;var r=t.apply(void 0,n);return K(r,e),r},L=Promise.resolve().then(function(){return $(null)}),V=!1;L.catch(function(i){V||console.warn(i)});var Z=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];V=!0;var r=Date.now();return L.then(function(c){return M(c,n,r)})};const H={class:"backdrop-blur-3xl"},Y=a("td",{class:"font-weight-black text-xl"},"Type",-1),ee={class:"text-md"},te=a("td",{class:"font-weight-black text-xl"},"Period",-1),ne={class:"text-md"},oe={key:0},re={key:1},ae=a("td",{class:"font-weight-black text-xl"},"Description",-1),le={class:"text-md"},se=a("td",{class:"font-weight-black text-xl"},"Price",-1),ie={class:"text-md"},P="http://localhost:5173/payment-successful",C="http://localhost:5173/subscriptions",ue=q({__name:"BuySubscriptionDialog",setup(i){const t=z(),n=y(()=>t.buyDialog),e=y(()=>t.buyDialogData);function r(){t.closeBuyDialog()}const c="pk_test_51OvhUr09gQOP4k1JStphCZd6KNrudaOfpd3MQWhZrDfCudIDpXCV8OxXSpKSpd8mPJhTEgsE6A3ypiuLeO0jQh3800Iv6emHJY",v=x(!1);let h;Z(c).then(d=>{h=d});const w=x([{price:"price_1OyamG09gQOP4k1JDE1Q6E5b",quantity:1}]);async function j(){if(!h){console.error("Stripe has not been initialized");return}v.value=!0;const{error:d}=await h.redirectToCheckout({lineItems:w.value,mode:"payment",successUrl:P,cancelUrl:C});d&&console.error(d),v.value=!1}return(d,u)=>{const p=s("v-col"),S=s("v-btn"),b=s("v-row"),O=s("v-card-title"),T=s("v-table"),U=s("v-img"),I=s("stripe-checkout"),R=s("v-card-actions"),N=s("v-card-text"),Q=s("v-card"),W=s("v-dialog");return g(),A(W,{modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=f=>n.value=f),persistent:"","max-width":"800",style:{"background-color":"rgba(20, 20, 20, 0.9)"}},{default:l(()=>[o(Q,null,{default:l(()=>[o(O,null,{default:l(()=>[o(b,null,{default:l(()=>[o(p,{cols:"1"}),o(p,{cols:"10",class:"headline text-h4",align:"center"},{default:l(()=>[k(" Purchase details ")]),_:1}),o(p,{cols:"1",align:"end"},{default:l(()=>[o(S,{icon:"mdi-close",variant:"plain",onClick:u[0]||(u[0]=f=>r())})]),_:1})]),_:1})]),_:1}),o(N,null,{default:l(()=>[a("div",H,[o(b,null,{default:l(()=>[o(p,{align:"start"},{default:l(()=>[o(T,{hover:""},{default:l(()=>[a("tbody",null,[a("tr",null,[Y,a("td",ee,_(e.value.name),1)]),a("tr",null,[te,a("td",ne,[e.value.period==1?(g(),E("span",oe,"1 month")):(g(),E("span",re,_(e.value.period)+" months ",1))])]),a("tr",null,[ae,a("td",le,_(e.value.description)+" ?? ",1)]),a("tr",null,[se,a("td",ie,_(e.value.price),1)])])]),_:1})]),_:1}),o(p,{align:"center"},{default:l(()=>[o(U,{"aspect-ratio":1,class:"rounded-lg",src:e.value.image,width:"300",cover:""},null,8,["src"])]),_:1})]),_:1}),o(I,{ref:"checkoutRef",mode:"payment",pk:G(c),"line-items":w.value,"success-url":P,"cancel-url":C,onLoading:u[1]||(u[1]=f=>v.value=f)},null,8,["pk","line-items"]),o(R,null,{default:l(()=>[o(S,{class:"mt-4",color:"success",block:"",size:"large",onClick:j,variant:"elevated",loading:v.value},{default:l(()=>[k("Buy for "+_(e.value.price)+" z≈Ç",1)]),_:1},8,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{ue as default};
