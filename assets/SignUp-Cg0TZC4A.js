import{d as X,r as u,u as Y,c as V,a as Z,b as o,o as d,e as v,w as t,f as q,n as ee,g as l,h as y,A as k,F as E,B as A,i as S,C as ae,D as le,E as te,j as ne,m as oe,p as se,G as re}from"./index-BmzUMSUD.js";const ue={key:1},ce=X({__name:"SignUp",setup(de){const B=u(!1),c=u(!1),r=u(0),x=u([{id:1,text:"Tell us about yourself",active:!1},{id:2,text:"Create your account",active:!1}]),i=u([!1,!1]),L=[e=>!!e||"Field required"],m=u([{name:"first_name",label:"First name",icon:"mdi-account",value:"",rules:[e=>!!e||"First name is required",e=>e.length>=2||"First name must containt at least 2 characters",e=>e.length<=70||"First name too large"]},{name:"last_name",label:"Last name",icon:"mdi-account",value:"",rules:[e=>!!e||"Last name is required",e=>e.length>=2||"Last name must containt at least 2 characters",e=>e.length<=70||"Last name too large"]},{name:"email",label:"Email",icon:"mdi-email",value:"",rules:[e=>!!e||"Email",e=>e.length>=6||"Email must containt at least 6 characters",e=>e.length<=70||"Email too large",e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Invalid email format"]},{name:"phone",label:"Phone",icon:"mdi-phone",value:"",rules:[e=>!!e||"Phone is required",e=>e.length>=6||"Phone must containt at least 6 characters",e=>e.length<=70||"Phone too large"]}]),p=u(null),N=u(["Rather not say","Men","Woman"]),g=u([{name:"password",label:"Password",icon:"mdi-key",visible:!1,value:"",rules:[e=>!!e||"Password is required",e=>e.length>=4||"Password must containt at least 4 characters",e=>e.length<=70||"Password too large"]},{name:"password2",label:"Repeat password",icon:"mdi-key",visible:!1,value:"",rules:[e=>!!e||"Password is required",e=>e.length>=4||"Password must containt at least 4 characters",e=>e.length<=70||"Password too large",e=>e===g.value[0].value||"Passwords do not match"]}]),_=Y();var b=V(()=>_.signUpDialog);function U(){m.value.every(e=>e.value=""),g.value.every(e=>e.value=""),p.value=null,_.closeSignUpDialog()}const R=V(()=>i.value.every(e=>e)),$=async()=>{c.value=!0;const e={first_name:m.value[0].value,last_name:m.value[1].value,email:m.value[2].value,phone:m.value[3].value,gender:p.value,password:g.value[0].value};try{const n=await te(ne,e.email,e.password),s=oe(se,"users",n.user.uid);await re(s,{first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,gender:p.value}),await _.setUserData(n.user),_.showAlert("success","Account successfully created, now go to dashboard and subscribe to a plan.")}catch(n){console.log(n),_.showAlert("error",n.code)}c.value=!1,U()},I=Z(),T=V(()=>I.name.value==="dark");return(e,n)=>{const s=o("v-col"),f=o("v-btn"),h=o("v-row"),G=o("v-card-title"),P=o("v-stepper-item"),M=o("v-divider"),W=o("v-stepper-header"),C=o("v-text-field"),j=o("v-select"),F=o("v-form"),D=o("v-window-item"),z=o("v-stepper-window"),O=o("v-tooltip"),H=o("v-stepper-actions"),J=o("v-stepper"),K=o("v-card-text"),Q=o("v-dialog");return d(),v(Q,{modelValue:ae(b),"onUpdate:modelValue":n[7]||(n[7]=a=>le(b)?b.value=a:b=a),persistent:"",width:"700",style:{"background-color":"rgba(50, 50, 50, 0.8)"}},{default:t(()=>[q("div",{class:ee(["rounded-xl pa-4 border-4 border-indigo-900",T.value?"bg-slate-900":"bg-slate-200"])},[l(G,null,{default:t(()=>[l(h,null,{default:t(()=>[l(s,{cols:"2"}),l(s,{cols:"8",class:"headline text-h4",align:"center"},{default:t(()=>[y(" Sign up ")]),_:1}),l(s,{cols:"2",align:"end"},{default:t(()=>[l(f,{icon:"mdi-close",variant:"plain",onClick:U,disabled:c.value},null,8,["disabled"])]),_:1})]),_:1})]),_:1}),l(K,null,{default:t(()=>[l(J,{modelValue:r.value,"onUpdate:modelValue":n[6]||(n[6]=a=>r.value=a),mobile:e.$vuetify.display.smAndDown,elevation:"0",style:{"background-color":"rgba(255, 255, 255, 0.2)"}},{default:t(()=>[l(W,null,{default:t(()=>[l(P,{complete:i.value[0],title:x.value[0].text,value:"1"},null,8,["complete","title"]),l(M),l(P,{complete:i.value[1],title:x.value[1].text,value:"2"},null,8,["complete","title"])]),_:1}),l(z,null,{default:t(()=>[l(D,{value:"1"},{default:t(()=>[l(F,{modelValue:i.value[0],"onUpdate:modelValue":n[1]||(n[1]=a=>i.value[0]=a)},{default:t(()=>[l(h,null,{default:t(()=>[(d(!0),k(E,null,A(m.value,a=>(d(),v(s,{cols:"12",md:"6",key:e.name},{default:t(()=>[l(C,{modelValue:a.value,"onUpdate:modelValue":w=>a.value=w,label:a.label,rules:a.rules,"prepend-inner-icon":a.icon,variant:"underlined"},null,8,["modelValue","onUpdate:modelValue","label","rules","prepend-inner-icon"])]),_:2},1024))),128)),l(s,{cols:"12",md:"6"},{default:t(()=>[l(j,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=a=>p.value=a),label:"Gender",items:N.value,"prepend-inner-icon":"mdi-family-tree",rules:L,variant:"underlined"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(D,{value:"2"},{default:t(()=>[l(F,{modelValue:i.value[1],"onUpdate:modelValue":n[2]||(n[2]=a=>i.value[1]=a)},{default:t(()=>[l(h,null,{default:t(()=>[(d(!0),k(E,null,A(g.value,a=>(d(),v(s,{cols:"12",md:"6",key:e.name},{default:t(()=>[l(C,{modelValue:a.value,"onUpdate:modelValue":w=>a.value=w,label:a.label,rules:a.rules,"prepend-inner-icon":a.icon,type:a.visible?"text":"password","append-inner-icon":a.visible?"mdi-eye":" mdi-eye-off","onClick:appendInner":w=>a.visible=!a.visible,autocomplete:"current-password",disabled:c.value,variant:"underlined"},null,8,["modelValue","onUpdate:modelValue","label","rules","prepend-inner-icon","type","append-inner-icon","onClick:appendInner","disabled"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(H,null,{next:t(()=>[l(s,{cols:r.value==0?"12":"6",sm:r.value==0?"12":"6"},{default:t(()=>[r.value==0?(d(),v(f,{key:0,block:"",onClick:n[3]||(n[3]=a=>r.value++),disabled:!i.value[r.value],text:"Next","append-icon":"mdi-arrow-right",class:"text-h5",color:"success"},null,8,["disabled"])):(d(),k("span",ue,[B.value?S("",!0):(d(),v(O,{key:0,activator:"parent",location:"top","no-overflow":""},{default:t(()=>[y(" Fill required fields ")]),_:1})),q("span",null,[l(f,{block:"",color:"green-darken-2",onClick:n[4]||(n[4]=a=>$()),loading:c.value,disabled:!R.value},{default:t(()=>[y("Sign up")]),_:1},8,["loading","disabled"])])]))]),_:1},8,["cols","sm"])]),prev:t(()=>[r.value==1?(d(),v(s,{key:0,cols:"6",sm:"6"},{default:t(()=>[l(f,{block:"",disabled:c.value,onClick:n[5]||(n[5]=a=>r.value--),text:"Previous","prepend-icon":"mdi-arrow-left",class:""},null,8,["disabled"])]),_:1})):S("",!0)]),_:1})]),_:1},8,["modelValue","mobile"])]),_:1})],2)]),_:1},8,["modelValue"])}}});export{ce as default};
